C51 COMPILER V9.56.0.0   NRF_DT                                                            01/03/2019 22:10:59 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE NRF_DT
OBJECT MODULE PLACED IN ..\OBJ\NRF_DT.obj
COMPILER INVOKED BY: D:\Program Files (x86)\Keil_v5\C51\BIN\C51.EXE ..\APP\NRF_DT\NRF_DT.c OPTIMIZE(8,SPEED) BROWSE INCD
                    -IR(..\USER;..\SYSTEM;..\SYSTEM\delay;..\SYSTEM\uart;..\SYSTEM\adc;..\SYSTEM\eeprom;..\SYSTEM\timer;..\SYSTEM\pca;..\SYST
                    -EM\spi;..\HARDWARE\NRF24L01;..\HARDWARE\Rocker;..\APP\NRF_DT) DEFINE(STC_Y5,FOSC=11059200L,UART_BAUD=115200,UART_PARITYB
                    -IT=ODD_PARITY,TEST_MODE=1,NRF_CAR_SLAVE,ROCKER_SUM=1) DEBUG OBJECTEXTEND PRINT(.\Listings\NRF_DT.lst) OBJECT(..\OBJ\NRF_
                    -DT.obj)

line level    source

   1          #include "NRF_DT.h"
   2          
   3          extern volatile bit Delay_Time0_500ms_Flag;
   4          
   5          sbit LED_RUN = P5^4;
   6          
   7          #ifdef NRF_CAR_MASTER 
              extern RockerTypeDef *RackerStruct_P;
              #endif
  10          #ifdef NRF_CAR_SLAVE
  11          #if (ROCKER_SUM == 1)
  12          RockerTypeDef ONE;
  13          RockerTypeDef *RackerStruct_P = &ONE;
  14          #endif
  15          #endif
  16          
  17          #ifdef NRF_CAR_SLAVE 
  18          uint8_t str[20];
  19          #endif
  20          
  21          void NRF_DT(void)
  22          {       
  23   1              while(1){
  24   2      #ifdef NRF_CAR_MASTER 
                      if(Delay_Time0_500ms_Flag == 1)
                      {/*定时程序*/
                              Get_Rocker();//获得摇杆数据
                              ADC_UART_TEST();//测试遥感数据
                              
                              {/*发送摇杆数据*/       
              #if (ROCKER_SUM == 1)   
                                      if(NRF24L01_TxPacket(*RackerStruct_P) == TX_OK)//发送数据包
                                      {
                                              /*发送成功，LED RUN*/
                                              LED_RUN = !LED_RUN;
                                              UART_SendString("NRF24L01 TxPacket Send OK\r\n");
                                      }
                                      else
                                      {
                                              UART_SendString("NRF24L01 TxPacket Send ERR\r\n");
                                      }
              #endif  
              //#if (ROCKER_SUM == 2)
              //                      
              //#endif        
                              }
                              Delay_Time0_500ms_Flag = 0;
                      }
                      
                      {/*非定时程序*/
                              
C51 COMPILER V9.56.0.0   NRF_DT                                                            01/03/2019 22:10:59 PAGE 2   

                      }
              #endif
  54   2              
  55   2      #ifdef NRF_CAR_SLAVE
  56   2              if(Delay_Time0_500ms_Flag == 1)
  57   2              {/*定时程序*/
  58   3                      Delay_Time0_500ms_Flag = 0;
  59   3              }
  60   2              {/*非定时程序*/
  61   3                      if(NRF24L01_RxPacket(*RackerStruct_P) == 0)//接受到数据包
*** ERROR C181 IN LINE 61 OF ..\APP\NRF_DT\NRF_DT.c: incompatible operand
  62   3                      {
  63   4                              LED_RUN = !LED_RUN;
  64   4                              UART_SendString("Get NRF24L01 Rx Packet:\r\n");
  65   4      #if (ROCKER_SUM == 1)
  66   4                              sprintf(str, "Rocker_X = %u\t", RackerStruct_P->X);
  67   4                              UART_SendString(str);
  68   4                              sprintf(str, "Rocker_Y = %u\r\n", RackerStruct_P->Y);
  69   4                              UART_SendString(str);
  70   4      #endif
  71   4      //#if (ROCKER_SUM == 2)
  72   4      //                      sprintf(str, "Rocker_L_X = %u\t", Rocker.L.X);
  73   4      //                      UART_SendString(str);
  74   4      //                      sprintf(str, "Rocker_L_Y = %u\r\n", Rocker.L.Y);
  75   4      //                      UART_SendString(str);
  76   4      //                      sprintf(str, "Rocker_R_X = %u\t", Rocker.R.X);
  77   4      //                      UART_SendString(str);
  78   4      //                      sprintf(str, "Rocker_R_Y = %u\r\n", Rocker.R.Y);
  79   4      //                      UART_SendString(str);
  80   4      //#endif
  81   4      //                      tmp_buf[5] = '\r';
  82   4      //                      tmp_buf[6] = '\n';
  83   4      //                      tmp_buf[7] = '\0';//加入字符串结束符
  84   4      //                      UART_SendString(Rocker);    
  85   4                      }
  86   3              }
  87   2      #endif  //NRF_CAR_SLAVE End
  88   2      }
  89   1      }
  90          
  91          
  92          
  93          

C51 COMPILATION COMPLETE.  0 WARNING(S),  1 ERROR(S)
